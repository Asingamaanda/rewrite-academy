{% extends "base.html" %}
{% block title %}Add Student — Rewrite Academy{% endblock %}

{% block extra_css %}
<style>
.section-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 1.75rem;
    margin-bottom: 1.25rem;
}
.section-card h3 {
    font-size: 0.75rem;
    color: var(--accent);
    margin-bottom: 1.25rem;
    padding-bottom: 0.65rem;
    border-bottom: 1px solid var(--border);
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}
.subject-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 0.6rem;
}
.subject-check {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.18s ease;
    margin-bottom: 0;
}
.subject-check:hover {
    background: rgba(34,211,238,0.06);
    border-color: rgba(34,211,238,0.35);
}
.subject-check input[type="checkbox"] {
    width: 16px; height: 16px;
    accent-color: var(--accent);
    flex-shrink: 0;
}
.subject-check span { font-size: 0.875rem; color: var(--text-muted); }
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}
@media (max-width: 640px) { .form-row { grid-template-columns: 1fr; } }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="flex-between">
        <div>
            <h1>➕ Add New Student</h1>
            <p>Register a student into Rewrite Academy</p>
        </div>
        <a href="/students" class="btn-outline">← Back to Students</a>
    </div>
</div>

{% if error %}
<div style="background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);color:#fca5a5;padding:1rem 1.25rem;border-radius:var(--radius-sm);margin-bottom:1.5rem;font-size:0.875rem;">
    ⚠️ {{ error }}
</div>
{% endif %}

<form method="POST" action="/student/add">
    <div class="section-card">
        <h3>Student Information</h3>
        <div class="form-row">
            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" name="name" required placeholder="e.g. Thandi Dlamini">
            </div>
            <div class="form-group">
                <label>Email *</label>
                <input type="email" name="email" required placeholder="student@email.com">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Phone</label>
                <input type="tel" name="phone" placeholder="0712 345 678">
            </div>
            <div class="form-group">
                <label>ID Number (optional)</label>
                <input type="text" name="id_number" placeholder="e.g. 050112 5678 082">
            </div>
        </div>
    </div>

    <div class="section-card">
        <h3>Parent / Guardian</h3>
        <div class="form-row">
            <div class="form-group">
                <label>Parent Name *</label>
                <input type="text" name="parent_name" required placeholder="e.g. Mrs Dlamini">
            </div>
            <div class="form-group">
                <label>Parent Phone *</label>
                <input type="tel" name="parent_phone" required placeholder="0823 456 789">
            </div>
        </div>
        <div class="form-group">
            <label>Parent Email</label>
            <input type="email" name="parent_email" placeholder="parent@email.com">
        </div>
    </div>

    <div class="section-card">
        <h3>Subjects (select at least 3) *</h3>
        <div class="subject-grid">
            {% for subject in subjects %}
            <label class="subject-check">
                <input type="checkbox" name="subjects" value="{{ subject }}">
                <span>{{ subject }}</span>
            </label>
            {% endfor %}
        </div>
    </div>

    <div class="section-card">
        <h3>Additional Notes</h3>
        <div class="form-group" style="margin-bottom:0;">
            <label>Notes (optional)</label>
            <textarea name="notes" rows="3" placeholder="Any special requirements or accommodations…"></textarea>
        </div>
    </div>

    <div style="display:flex;gap:1rem;margin-top:0.5rem;">
        <button type="submit" class="btn-gold" style="flex:1;justify-content:center;padding:0.85rem;">
            ✅ Register Student
        </button>
        <a href="/students" class="btn-outline" style="flex:1;justify-content:center;padding:0.85rem;text-align:center;">
            Cancel
        </a>
    </div>
</form>
{% endblock %}
